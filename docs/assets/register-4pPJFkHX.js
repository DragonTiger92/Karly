import"./style-v06b81ne.js";import{g as n}from"./header-mEu_Hzmd.js";/* empty css               */import{s as A}from"./setDocumentTitle-_OwlDZqT.js";import{p as w}from"./pocketbase-oaPkJOdo.js";A("칼리 | 회원가입");const l=n("html"),a=n(".user_id_input"),u=n(".user_password_input"),g=n(".user_password_check_input"),p=n(".user_name_input"),_=n(".user_email_input"),s=n(".user_phone_input"),m=n(".duplicate_id_btn"),o=n(".duplicate_alert_container"),v=n(".duplicate_alert_text"),E=n(".duplicate_alert_btn"),c=n(".check_number_btn"),f=n(".error_message"),r=n("#user_password_error"),h=n("#user_password_check_error"),y=n("#user_email_error"),b=n("#agree_all");function i(e,t){e.target.value&&t.classList.add("input_active")}function S(e){return!!/^(?=.*[A-Za-z])[A-Za-z\d]{6,16}$/.test(e)}function q(e){return!!/^(?=.*[!@#$%^&*(),.?":{}|<>]).{6,16}$/.test(e)}function x(e){return!!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)}async function k(){const e=await w.collection("users").getFullList();return console.log(e),e.filter(d=>a.value===d.username).length!==0}async function C(){S(a.value)?await k()?(v.textContent="이미 등록된 아이디 입니다",o.style.visibility="visible",l.style.overflow="hidden"):(m.disabled=!0,m.classList.add("disable_btn"),v.textContent="사용 할 수 있는 아이디 입니다",o.style.visibility="visible",l.style.overflow="hidden"):(v.textContent="6자 이상 16자 이하의 영문 혹은 영문과 숫자를 조합",o.style.visibility="visible",l.style.overflow="hidden")}async function I(){document.querySelector(".duplicate_number_alert_text").textContent="믿음으로 인증되었습니다",document.querySelector(".duplicate_number_alert_container").style.visibility="visible",c.classList.add("disable_btn"),l.style.overflow="hidden"}function N(){o.style.visibility="hidden",l.style.overflow="scroll"}function P(){document.querySelector(".duplicate_number_alert_container").style.visibility="hidden",l.style.overflow="scroll"}a.addEventListener("input",e=>{i(e,a),S(e.target.value)?f.classList.remove("is_invalid"):f.classList.add("is_invalid")});u.addEventListener("input",e=>{i(e,u);let t=q(e.target.value);e.target.value&&e.target.value.length<6?(r.classList.add("is_invalid"),r.textContent="최소 6자 이상 입력"):e.target.value.length>16?(r.classList.add("is_invalid"),r.textContent="최대 16자 까지 입력"):t?r.classList.remove("is_invalid"):r.textContent="특수문자 포함 최소 6자 - 최대 16자"});g.addEventListener("input",e=>{i(e,g),e.target.value===u.value?h.classList.remove("is_invalid"):h.classList.add("is_invalid")});p.addEventListener("input",e=>i(e,p));_.addEventListener("input",e=>{i(e,_),x(e.target.value)?y.classList.remove("is_invalid"):y.classList.add("is_invalid")});s.addEventListener("input",e=>{i(e,s);let t=e.target.value;isNaN(t)?s.value="":(s.value=t,t?c.classList.remove("disable_btn"):c.classList.add("disable_btn"))});c.addEventListener("click",I);document.querySelector(".duplicate_number_alert_btn").addEventListener("click",P);m.addEventListener("click",C);E.addEventListener("click",N);function L(e){for(let t=1;t<5;t++)document.querySelector(`#check_${t}`).checked=e}b.addEventListener("click",function(){b.checked?L(!0):L(!1)});function $(){new daum.Postcode({oncomplete:function(e){e.userSelectedType}}).open({popupKey:"popup1",popupTitle:"컬리 - 마켓컬리/뷰티컬리",left:window.screen.width/2-530/2,top:window.screen.height/2-630/2})}const z=n(".user_address_btn");z.addEventListener("click",$);a.value&&(document.querySelector(".join_btn").classList.remove("disable_btn"),console.log("버튼 활성화!"));document.querySelector(".join_btn").addEventListener("click",function(e){e.preventDefault();const t={username:a.value,password:u.value,passwordConfirm:u.value,name:p.value,email:_.value,phone:s.value,gender:document.querySelectorAll(".radio_wrapper")[0].value??"none",birth:`${document.querySelector("#year").value}${document.querySelector("#month").value}${document.querySelector("#day").value}`};w.collection("users").create(t).then(()=>{console.log("회원가입 완료!"),location.href="%BASE_URL%src/pages/login/"}).catch(d=>{console.log("회원가입 실패",d)})});document.querySelectorAll(".radio_wrapper")[0].addEventListener("click",function(e){e.target.tagName==="INPUT"&&(document.querySelectorAll(".radio_wrapper")[0].value=e.target.value)});document.querySelector("#year").addEventListener("input",function(e){if(e.target.value.length>4){e.target.value=e.target.value.toString(),e.target.value=e.target.value.slice(0,4);let t=Number(e.target.value);t>=1900&&t<=2024&&(document.querySelector("#year").textContent=e.target.value)}});document.querySelector("#month").addEventListener("input",function(e){if(e.target.value.length>2){e.target.value=e.target.value.toString(),e.target.value=e.target.value.slice(0,2);let t=Number(e.target.value);t>=1&&t<=12&&(document.querySelector("#month").textContent=e.target.value)}});document.querySelector("#day").addEventListener("input",function(e){if(e.target.value.length>2){e.target.value=e.target.value.toString(),e.target.value=e.target.value.slice(0,2);let t=Number(e.target.value);t>=1&&t<=31&&(document.querySelector("#day").textContent=e.target.value)}});
