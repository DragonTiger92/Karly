import"./style-v06b81ne.js";import{i as u,g as s}from"./header-Ao0khgja.js";/* empty css               */import{s as v}from"./setDocumentTitle-_OwlDZqT.js";import{p as m}from"./pocketbase-oaPkJOdo.js";const{localStorage:d}=window;function h(e,t){return new Promise((n,a)=>{u(e)?(d.setItem(e,JSON.stringify(t)),n()):a({message:"key는 문자 타입 이어야 합니다."})})}function p(e){return new Promise((t,n)=>{u(e)?t(JSON.parse(d.getItem(e))):n({message:"key는 문자 타입 이어야 합니다."})})}const _=s(".login_btn"),r=s(".user_id_input"),o=s(".user_password_input"),c=s(".login_alert_container"),g=s("html"),w=s(".login_alert_btn"),l=s(".error_message"),i=s("#user_password_error");v("칼리 | 로그인");function L(e){return!!/^(?=.*[A-Za-z])[A-Za-z\d]{6,16}$/.test(e)}function y(e){return!!/^(?=.*[!@#$%^&*(),.?":{}|<>]).{6,16}$/.test(e)}async function A(e,t){try{if(await m.collection("users").authWithPassword(e,t)){let{model:a,token:f}=await p("pocketbase_auth");h("auth",{isAuth:!!a,user:a,token:f}),window.location.href="/Karly/src/pages/main/"}}catch(n){b(),console.log("로그인 실패!",n)}}function b(){c.style.visibility="visible",g.style.overflowY="hidden"}function x(){c.style.visibility="hidden",g.style.overflowY="scroll"}_.addEventListener("click",function(e){e.preventDefault(),A(r.value,o.value),console.log(r.value,o.value)});w.addEventListener("click",x);r.addEventListener("input",e=>{L(e.target.value)?l.classList.remove("is_invalid"):l.classList.add("is_invalid")});o.addEventListener("input",e=>{let t=y(e.target.value);e.target.value&&e.target.value.length<6?(i.classList.add("is_invalid"),i.textContent="최소 6자 이상 입력"):e.target.value.length>16?(i.classList.add("is_invalid"),i.textContent="최대 16자 까지 입력"):t?i.classList.remove("is_invalid"):i.textContent="특수문자 포함 최소 6자 - 최대 16자"});
